{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar OptionContext =\n/** @class */\nfunction () {\n  function OptionContext(options) {\n    this.stateChangeListeners = new Set();\n    this.valueChangeListeners = new Set();\n    this._state = {};\n    this._data = {};\n    this._options = options;\n\n    for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n      var option = options_1[_i];\n      this._state[option.key] = {\n        key: option.key,\n        available: 0,\n        options: []\n      };\n    }\n  }\n\n  Object.defineProperty(OptionContext.prototype, \"options\", {\n    get: function () {\n      return this._options;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(OptionContext.prototype, \"state\", {\n    get: function () {\n      return this._state;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  OptionContext.prototype.addStateChangeListener = function (listener) {\n    this.stateChangeListeners.add(listener);\n  };\n\n  OptionContext.prototype.removeStateChangeListener = function (listener) {\n    this.stateChangeListeners.delete(listener);\n  };\n\n  OptionContext.prototype.addValueChangeListener = function (listener) {\n    this.valueChangeListeners.add(listener);\n  };\n\n  OptionContext.prototype.removeValueChangeListener = function (listener) {\n    this.valueChangeListeners.delete(listener);\n  };\n\n  OptionContext.prototype.optionEnter = function (key) {\n    var _a; // TODO:\n\n\n    var optionState = this.getOptionState(key);\n    this.setState((_a = {}, _a[key] = __assign({}, optionState, {\n      available: optionState.available + 1\n    }), _a));\n  };\n\n  OptionContext.prototype.optionExit = function (key) {\n    var _a;\n\n    var optionState = this.getOptionState(key);\n    this.setState((_a = {}, _a[key] = __assign({}, optionState, {\n      available: optionState.available - 1\n    }), _a));\n  };\n\n  OptionContext.prototype.getOptionState = function (key) {\n    return this.state[key] || null;\n  };\n\n  OptionContext.prototype.getValue = function (key) {\n    var optionState = this.getOptionState(key);\n\n    if (!optionState) {\n      return null;\n    }\n\n    var value = this._data[key];\n\n    if (value) {\n      return value;\n    }\n\n    return optionState.defaultValue || null;\n  };\n\n  OptionContext.prototype.setValue = function (key, value) {\n    for (var _i = 0, _a = Array.from(this.valueChangeListeners); _i < _a.length; _i++) {\n      var listener = _a[_i];\n      listener(key, value);\n    }\n  }; // set single source of truth\n\n\n  OptionContext.prototype.setData = function (data) {\n    this._data = data;\n    this.notifyListener();\n  };\n\n  OptionContext.prototype.setDefaultValue = function (key, defaultValue) {\n    var _a;\n\n    var optionState = this.getOptionState(key);\n    this.setState((_a = {}, _a[key] = __assign({}, optionState, {\n      defaultValue: defaultValue\n    }), _a));\n  };\n\n  OptionContext.prototype.setOptions = function (key, options) {\n    var _a;\n\n    this.setState((_a = {}, _a[key] = __assign({}, this.state[key], {\n      key: key,\n      options: options\n    }), _a));\n  };\n\n  OptionContext.prototype.setState = function (state) {\n    this._state = __assign({}, this.state, state);\n    this.notifyListener();\n  };\n\n  OptionContext.prototype.notifyListener = function () {\n    for (var _i = 0, _a = Array.from(this.stateChangeListeners); _i < _a.length; _i++) {\n      var listener = _a[_i];\n      listener();\n    }\n  };\n\n  return OptionContext;\n}();\n\nexports.default = OptionContext;","map":{"version":3,"sources":["/Users/andrewtheodorides/Coding/webWork/avatar/node_modules/avataaars/dist/options/OptionContext.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","OptionContext","options","stateChangeListeners","Set","valueChangeListeners","_state","_data","_options","_i","options_1","option","key","available","get","enumerable","configurable","addStateChangeListener","listener","add","removeStateChangeListener","delete","addValueChangeListener","removeValueChangeListener","optionEnter","_a","optionState","getOptionState","setState","optionExit","state","getValue","defaultValue","setValue","Array","from","setData","data","notifyListener","setDefaultValue","setOptions","default"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar OptionContext = /** @class */ (function () {\n    function OptionContext(options) {\n        this.stateChangeListeners = new Set();\n        this.valueChangeListeners = new Set();\n        this._state = {};\n        this._data = {};\n        this._options = options;\n        for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n            var option = options_1[_i];\n            this._state[option.key] = {\n                key: option.key,\n                available: 0,\n                options: []\n            };\n        }\n    }\n    Object.defineProperty(OptionContext.prototype, \"options\", {\n        get: function () {\n            return this._options;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(OptionContext.prototype, \"state\", {\n        get: function () {\n            return this._state;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    OptionContext.prototype.addStateChangeListener = function (listener) {\n        this.stateChangeListeners.add(listener);\n    };\n    OptionContext.prototype.removeStateChangeListener = function (listener) {\n        this.stateChangeListeners.delete(listener);\n    };\n    OptionContext.prototype.addValueChangeListener = function (listener) {\n        this.valueChangeListeners.add(listener);\n    };\n    OptionContext.prototype.removeValueChangeListener = function (listener) {\n        this.valueChangeListeners.delete(listener);\n    };\n    OptionContext.prototype.optionEnter = function (key) {\n        var _a;\n        // TODO:\n        var optionState = this.getOptionState(key);\n        this.setState((_a = {},\n            _a[key] = __assign({}, optionState, { available: optionState.available + 1 }),\n            _a));\n    };\n    OptionContext.prototype.optionExit = function (key) {\n        var _a;\n        var optionState = this.getOptionState(key);\n        this.setState((_a = {},\n            _a[key] = __assign({}, optionState, { available: optionState.available - 1 }),\n            _a));\n    };\n    OptionContext.prototype.getOptionState = function (key) {\n        return this.state[key] || null;\n    };\n    OptionContext.prototype.getValue = function (key) {\n        var optionState = this.getOptionState(key);\n        if (!optionState) {\n            return null;\n        }\n        var value = this._data[key];\n        if (value) {\n            return value;\n        }\n        return optionState.defaultValue || null;\n    };\n    OptionContext.prototype.setValue = function (key, value) {\n        for (var _i = 0, _a = Array.from(this.valueChangeListeners); _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener(key, value);\n        }\n    };\n    // set single source of truth\n    OptionContext.prototype.setData = function (data) {\n        this._data = data;\n        this.notifyListener();\n    };\n    OptionContext.prototype.setDefaultValue = function (key, defaultValue) {\n        var _a;\n        var optionState = this.getOptionState(key);\n        this.setState((_a = {},\n            _a[key] = __assign({}, optionState, { defaultValue: defaultValue }),\n            _a));\n    };\n    OptionContext.prototype.setOptions = function (key, options) {\n        var _a;\n        this.setState((_a = {},\n            _a[key] = __assign({}, this.state[key], { key: key,\n                options: options }),\n            _a));\n    };\n    OptionContext.prototype.setState = function (state) {\n        this._state = __assign({}, this.state, state);\n        this.notifyListener();\n    };\n    OptionContext.prototype.notifyListener = function () {\n        for (var _i = 0, _a = Array.from(this.stateChangeListeners); _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener();\n        }\n    };\n    return OptionContext;\n}());\nexports.default = OptionContext;\n"]},"metadata":{},"sourceType":"script"}